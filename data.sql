-- MySQL dump 10.13  Distrib 5.5.3-m3, for Win32 (x86)
--
-- Host: localhost    Database: blog
-- ------------------------------------------------------
-- Server version	5.5.3-m3-community

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `attachment`
--

DROP TABLE IF EXISTS `attachment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `attachment` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `blog_id` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '所属博客id',
  `path` varchar(255) NOT NULL DEFAULT '' COMMENT '附件路径',
  `origin_name` varchar(255) NOT NULL DEFAULT '' COMMENT '原始文件名',
  `creation_time` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '创建时间',
  `modification_time` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '修改时间',
  `is_deleted` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '是否被删除',
  PRIMARY KEY (`id`),
  KEY `blog_id` (`blog_id`)
) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COMMENT='附件表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `attachment`
--

LOCK TABLES `attachment` WRITE;
/*!40000 ALTER TABLE `attachment` DISABLE KEYS */;
INSERT INTO `attachment` VALUES (1,1,'1429088064_965972.rar','测试文件.rar',1429088064,0,0),(2,8,'1429363940_639343.html','js+css无限级菜单实例.html',1429363940,0,0),(3,15,'1429439341_970001.rar','测试文件和相关js文件下载.rar',1429439341,0,0);
/*!40000 ALTER TABLE `attachment` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `blog`
--

DROP TABLE IF EXISTS `blog`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `blog` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `category_id` int(11) unsigned NOT NULL DEFAULT '0',
  `title` varchar(255) NOT NULL DEFAULT '' COMMENT '博客标题',
  `content` text NOT NULL COMMENT '博客正文',
  `attachments` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '拥有的附件数量',
  `creation_time` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '创建时间',
  `modification_time` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '修改时间',
  `is_deleted` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '是否被删除',
  PRIMARY KEY (`id`),
  KEY `category_id` (`category_id`)
) ENGINE=MyISAM AUTO_INCREMENT=16 DEFAULT CHARSET=utf8 COMMENT='博客表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `blog`
--

LOCK TABLES `blog` WRITE;
/*!40000 ALTER TABLE `blog` DISABLE KEYS */;
INSERT INTO `blog` VALUES (1,2,'jquery 停止动画 stop的几种用法','<p>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;<br />\r\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;<br />\r\n&lt;head&gt;<br />\r\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;<br />\r\n&lt;title&gt;Panel&lt;/title&gt;<br />\r\n&lt;style type=&quot;text/css&quot;&gt;<br />\r\n* {<br />\r\n&nbsp;&nbsp;&nbsp; margin: 0;<br />\r\n&nbsp;&nbsp;&nbsp; padding: 0;<br />\r\n}<br />\r\nbody {<br />\r\n&nbsp;&nbsp;&nbsp; font-size: 13px;<br />\r\n&nbsp;&nbsp;&nbsp; line-height: 130%;<br />\r\n&nbsp;&nbsp;&nbsp; padding: 60px<br />\r\n}<br />\r\n#panel {<br />\r\n&nbsp;&nbsp;&nbsp; width: 60px;<br />\r\n&nbsp;&nbsp;&nbsp; border: 1px solid #0050D0;<br />\r\n&nbsp;&nbsp;&nbsp; height: 22px;<br />\r\n&nbsp;&nbsp;&nbsp; overflow: hidden;<br />\r\n}<br />\r\n.head {<br />\r\n&nbsp;&nbsp;&nbsp; padding: 5px;<br />\r\n&nbsp;&nbsp;&nbsp; background: #96E555;<br />\r\n&nbsp;&nbsp;&nbsp; cursor: pointer;<br />\r\n&nbsp;&nbsp;&nbsp; width: 300px;<br />\r\n}<br />\r\n.content {<br />\r\n&nbsp;&nbsp;&nbsp; padding: 10px;<br />\r\n&nbsp;&nbsp;&nbsp; text-indent: 2em;<br />\r\n&nbsp;&nbsp;&nbsp; border-top: 1px solid #0050D0;<br />\r\n&nbsp;&nbsp;&nbsp; display: block;<br />\r\n&nbsp;&nbsp;&nbsp; width: 280px;<br />\r\n}<br />\r\n&lt;/style&gt;<br />\r\n&lt;script src=&quot;jquery-1.9.1.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;<br />\r\n&lt;script type=&quot;text/javascript&quot;&gt;<br />\r\n$(function(){<br />\r\n&nbsp;&nbsp;&nbsp; $(&quot;button:eq(0)&quot;).click(function(){<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $(&quot;#panel&quot;).animate({height:&quot;150&quot; }, 1000)<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .animate({width:&quot;300&quot; }, 1000)<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .hide(2000)<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .animate({height:&quot;show&quot;, width:&quot;show&quot;, opacity:&quot;show&quot;}, 1000)<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .animate({height:&quot;500&quot;}, 1000);<br />\r\n&nbsp;&nbsp;&nbsp; });<br />\r\n&nbsp;&nbsp; &nbsp;//stop([clearQueue][,gotoEnd]);<br />\r\n//语法结构<br />\r\n&nbsp;&nbsp;&nbsp; $(&quot;button:eq(1)&quot;).click(function(){<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $(&quot;#panel&quot;).stop();//停止当前动画，继续下一个动画<br />\r\n&nbsp;&nbsp;&nbsp; });<br />\r\n&nbsp;&nbsp;&nbsp; $(&quot;button:eq(2)&quot;).click(function(){<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $(&quot;#panel&quot;).stop(true);//清除元素的所有动画<br />\r\n&nbsp;&nbsp;&nbsp; });<br />\r\n&nbsp;&nbsp;&nbsp; $(&quot;button:eq(3)&quot;).click(function(){<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $(&quot;#panel&quot;).stop(false, true);//让当前动画直接到达末状态 ，继续下一个动画<br />\r\n&nbsp;&nbsp;&nbsp; });<br />\r\n&nbsp;&nbsp;&nbsp; $(&quot;button:eq(4)&quot;).click(function(){<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $(&quot;#panel&quot;).stop(true, true);//清除元素的所有动画，让当前动画直接到达末状态<br />\r\n&nbsp;&nbsp;&nbsp; });<br />\r\n});<br />\r\n&lt;/script&gt;<br />\r\n&lt;/head&gt;<br />\r\n&lt;body&gt;<br />\r\n&lt;button&gt;开始一连串动画&lt;/button&gt;<br />\r\n&lt;button&gt;stop()&lt;/button&gt;<br />\r\n&lt;button&gt;stop(true)&lt;/button&gt;<br />\r\n&lt;button&gt;stop(false,true)&lt;/button&gt;<br />\r\n&lt;button&gt;stop(true,true)&lt;/button&gt;</p>\r\n\r\n<p>&lt;div id=&quot;panel&quot;&gt;<br />\r\n&nbsp;&nbsp;&nbsp; &lt;h5 class=&quot;head&quot;&gt;什么是jQuery?&lt;/h5&gt;</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; &lt;div class=&quot;content&quot;&gt;<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jQuery是继Prototype之后又一个优秀的JavaScript库，它是一个由 John Resig 创建于2006年1月的开源项目。jQuery凭借简洁的语法和跨平台的兼容性，极大地简化了JavaScript开发人员遍历HTML文档、操作DOM、处理事件、执行动画和开发Ajax。它独特而又优雅的代码风格改变了JavaScript程序员的设计思路和编写程序的方式。<br />\r\n&nbsp;&nbsp;&nbsp; &lt;/div&gt;<br />\r\n&lt;/div&gt;</p>\r\n\r\n<p>&lt;/body&gt;<br />\r\n&lt;/html&gt;</p>\r\n',1,1429088064,1429088443,0),(2,4,'CSS阴影效果（兼容N多浏览器）','<p>一、无关紧要碎碎念<br />\r\n在web页面的ui表现中，投影效果可以说是非常常见的一种表现效果了。例如开心网的头像修饰效果：</p>\r\n\r\n<p><img alt=\"\" src=\"/data/pic/20150415171240293194.jpg\" style=\"height:179px; width:467px\" /></p>\r\n\r\n<p>然而，在CSS2的时代，我们多半使用图片实现类似效果，或是使用CSS其他属性模拟阴影效果，但是，现在，CSS3的崛起使得这个问题已经不再是是个问题了，本文就将展示如何实现跨浏览器的盒阴影效果。</p>\r\n\r\n<p>二、标准方法<br />\r\n标准方法当然就是指使用CSS3的方法了，这个应该不少同行应该知道，参见如下代码：<br />\r\n.shadow{<br />\r\n&nbsp;&nbsp; &nbsp;-moz-box-shadow: 3px 3px 4px #000;<br />\r\n&nbsp;&nbsp; &nbsp;-webkit-box-shadow: 3px 3px 4px #000;<br />\r\n&nbsp;&nbsp; &nbsp;box-shadow: 3px 3px 4px #000;<br />\r\n}<br />\r\n释义为：横向偏移3像素，纵向偏移3像素，模糊4像素，颜色为纯黑。<br />\r\n如果我们把含上面样式的这个class shadow应用到图片上，就会产生如下的效果（截自Firefox3.6）：</p>\r\n\r\n<p><img alt=\"\" src=\"/data/pic/20150415171413206649.jpg\" style=\"height:250px; width:320px\" /></p>\r\n\r\n<p>三、那么IE浏览器呢？<br />\r\n对于目前对CSS3支持如狗屎的孤芳自赏的IE浏览器怎么办呢？box-shadow属性对于IE浏览器就像是圣诞树上的彩灯&mdash;&mdash;装饰而已。<br />\r\n好在IE浏览器有个IE <a href=\"http://msdn.microsoft.com/en-us/library/ms533086%28VS.85%29.aspx\">shadow滤镜</a>，是IE浏览器私有的一个东西，可以模拟还凑合的盒阴影效果，使用类似于下面的代码：<br />\r\n.shadow {<br />\r\n&nbsp;&nbsp; &nbsp;/* For IE 8 */<br />\r\n&nbsp;&nbsp; &nbsp;-ms-filter: &quot;progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color=&#39;#000000&#39;)&quot;;<br />\r\n&nbsp;&nbsp; &nbsp;/* For IE 5.5 - 7 */<br />\r\n&nbsp;&nbsp; &nbsp;filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color=&#39;#000000&#39;);<br />\r\n}<br />\r\n将shadow这个class应用到图片上，结果如下（截自IE6浏览器）：</p>\r\n\r\n<p><img alt=\"\" src=\"/data/pic/20150415171529546704.jpg\" style=\"height:247px; width:297px\" /></p>\r\n\r\n<p>虽然效果不及Firefox，chrome等现代浏览器，但是还能凑合着用用。</p>\r\n\r\n<p>四、样式综合<br />\r\n如下代码：<br />\r\n.shadow{<br />\r\n&nbsp;&nbsp; &nbsp;-moz-box-shadow: 3px 3px 4px #000;<br />\r\n&nbsp;&nbsp; &nbsp;-webkit-box-shadow: 3px 3px 4px #000;<br />\r\n&nbsp;&nbsp; &nbsp;box-shadow: 3px 3px 4px #000;<br />\r\n&nbsp;&nbsp; &nbsp;/* For IE 8 */<br />\r\n&nbsp;&nbsp; &nbsp;-ms-filter: &quot;progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color=&#39;#000000&#39;)&quot;;<br />\r\n&nbsp;&nbsp; &nbsp;/* For IE 5.5 - 7 */<br />\r\n&nbsp;&nbsp; &nbsp;filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color=&#39;#000000&#39;);<br />\r\n}<br />\r\n更多CSS3属性的跨浏览器支持可以查阅<a href=\"http://css3please.com\">这里(css3please.com)</a>。</p>\r\n\r\n<p>五、浏览器支持情况<br />\r\n&nbsp;&nbsp;&nbsp; Firefox 3.5+<br />\r\n&nbsp;&nbsp;&nbsp; Safari 3+<br />\r\n&nbsp;&nbsp;&nbsp; Google Chrome<br />\r\n&nbsp;&nbsp;&nbsp; Opera 10.50<br />\r\n&nbsp;&nbsp;&nbsp; Internet Explorer 5.5</p>\r\n',0,1429089609,0,0),(3,6,'谈谈网站静态化','<p><strong><span style=\"font-size:22px\">写在前头</span></strong><br />\r\n静态化是解决减轻网站压力,提高网站访问速度的常用方案,但在强调交互的We2.0 时代,对静态化提出了更高的要求,静态不仅要能静,还要能动,下面我通过一个项目,谈谈网站静态化后的架构设计方案,同时和大家探讨一下,在开源产品大行其道,言架构必称MemberCache, Nginx,的时代,微软技术在网站架构设计中的运用.</p>\r\n\r\n<p><strong><span style=\"font-size:22px\">静态化的设计原则和步骤</span></strong><br />\r\n静态化是解决减轻网站压力,但是静态化也会带来一系列的问题,包括开发上复杂度的增加,维护难度的增加,运用不的当,更可能适得其反,而许多替代方案,比如页面缓存,如果运用得当,也能起到很好的效果,所以在开始之前,必须进行详细的考察,确定是否适合静态化,并制定适合的静态化方式,下面先介绍一下</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">1考查读写比:</span></strong><br />\r\n&nbsp;&nbsp; &nbsp;读写比,准确的说是读写负荷比,是否值得静态化的最终考虑,由于一般写入的压力明显大于读出的压力,如果写入太频繁,或者每次写入消耗的资源太多,都不能达到效果,我觉得读写比例10:1应该是个上限.具体情况需要根据自己的业务逻辑判断</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">2确定页面呈现的内容是否适合静态化:</span></strong><br />\r\n&nbsp;&nbsp; &nbsp;在设计方案时,必须详细考虑每个原型页面,找到页面上展示的信息,和他的更新方式,更新时机,更新频率,一定要注意那些不起眼的信息,他们可能左右你的设计,<br />\r\n&nbsp;&nbsp; &nbsp;比如:我们以CSDN的论坛的任意一篇帖子为例,进行分析</p>\r\n\r\n<p><br />\r\n<img alt=\"\" src=\"/data/pic/20150415175234417312.jpg\" style=\"height:466px; width:512px\" /></p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;上面的帖子中呈现的内容主要是这样几块,帖子内容,回复内容,发帖人回复人的用户信息<br />\r\n&nbsp;&nbsp; &nbsp;帖子内容和回复内容在发帖时更新,发帖后用户可以修改其内容,更新频率高<br />\r\n&nbsp;&nbsp; &nbsp;用户信息,用户修改个人信息时可能会发生更改,用户等级增加时也可能发生更改,比如加星,更新频率低<br />\r\n&nbsp;&nbsp; &nbsp;回复数将每次回复后都要更改,更新频率高<br />\r\n&nbsp;&nbsp; &nbsp;设计时要注意细节,如上图中圈出来的部分,这些部分是怎么修改的,频率有多大,一个都不能放过</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">3确定生成方式:</span></strong><br />\r\n&nbsp;&nbsp; &nbsp;在上面帖子一例中.每次更改都重新生成页面是不可取的,一篇比回复数多的帖子,需要的数据量是巨大的(每层楼的用户信息,回复内容),任何修改,都需要重新取出数据进行生成是不能允许的.一般除非你的页面基本不用更新,或者更新开销极小,(比如一段嵌入的广告代码)才能采用整体更新的方式,不然就需要我们找到合适的更新页面局部区域的方法:<br />\r\n&nbsp;&nbsp; &nbsp;一般有下面两个方法:</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;<strong>1)正则修改法:</strong><br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;比如,如果帖子中的回复数,html代码是这样<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;label&gt;回复数&lt;var id=&quot;replyCount&quot;&gt;34&lt;/var&gt;&lt;/label&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;我们可以通过用下面正则来查找并替换计数<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;(?&lt;=id=&quot;replyCount&quot;&gt;)\\d{1,}<br />\r\n&nbsp;&nbsp; &nbsp;<strong>2)页面区域分块:</strong><br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;把页面分成很多小块,在显示时组装起来,比如DotText就采用这个方法</p>\r\n\r\n<p><img alt=\"\" src=\"/data/pic/20150415182538857397.jpg\" style=\"height:441px; width:379px\" /></p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;这是一篇典型的Dottext blog页面,其中红色标定部分是一个独立的文件,而黄色框内的是脚本动态加载,这些部分在最终显示的时候组合起来,最终构成了一篇Blog,具体的组合方法也有多种,可以使用Include,也可以自己来实现.DotText就自己实现了一套加载机制</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;上面的两种方法并不孤立,并可以根据需要,配合使用</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">4确定需要动态加载的信息:</span></strong><br />\r\n&nbsp;&nbsp; &nbsp;页面上总有一些内容看起来不太适合静态化,最典型的是一些统计结果,比如如果你在做一个图书介绍页面,可能就会需要展示图书的当天综合评分,或者书籍排名,这些内容需要用脚本进行动态加载<br />\r\n&nbsp;&nbsp; &nbsp;既然做了静态化,就是希望减少服务器负载,动态加载的数据总是不得已而为之,有的时候在需求允许的情况下,我们在数据在实时性和性能方面做一些妥协,比如上面帖子中的用户星级和昵称,从数据实时性上说,当用户的星级增长,他发言的所有帖子都应该发生变化,所以应该用动态加载.然而其实上这些信息如果不发生变化,也无伤大雅,用户反而能够看到自己在多年前发帖时的级别和昵称.</p>\r\n\r\n<p><strong><span style=\"font-size:22px\">现实中的项目</span></strong><br />\r\n&nbsp;&nbsp; &nbsp;X网站是大型的电影资讯,电影社区,向外提供电影相关信息服务,以及用户社区,其中信息服务部分, 其中大部分页面属于信息呈现页,读取量比较大,百万级别pv,信息主要由编辑在后台发布,更新较少,但其页面上有大量的交互性的内容,比如评论,收藏列表,同时许多内容允许用户创造,比如上传图片,添加注释.交互内容的数量和交互的频繁程度,都超过了普通的咨询页面,这次调整,准备将其中访问量最大的几块:电影资料页,影人资料页,进行静态化,如果成功,还将运用到更多的频道,基本实现全站静态化<br />\r\n&nbsp;&nbsp; &nbsp;通过对页面设计和前一版本的分析,下面是具有挑战性的地方.这些特点基本使用于大多数web2.0的站点,很具有典型意义</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">1页面生成的触发条件复杂</span></strong><br />\r\n&nbsp;&nbsp; &nbsp;一般论坛中的帖子或者blog,更新方式比较单一:主要是由回复进行触发还有少数的修改动作,然而该网站一个页面上需要根据不同触发条件就有20多个, 比如光二级菜单:用户发布图片,删除图片,发布或者删除影片信息,发布或者修改视频,后台修改电影信息,都有可能触发</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">2一个动作触发生成的页面可能很多而且相互交叠</span></strong><br />\r\n&nbsp;&nbsp; &nbsp;每一个动作都会触发一系列的生成,并且不同动作可能都会涉及同一个页面或者区域的生成.<br />\r\n&nbsp;&nbsp; &nbsp;比如:用户给一步电影评分,需要生成评分更多页,评分统计更多页,首页右侧谁还关注此影片小区域,等等.用户收藏一个影片,也需要更新首页右侧谁还关注此影片小区域</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">3触发频繁</span></strong><br />\r\n&nbsp;&nbsp; &nbsp;虽然不及某些更大规模的网站,但是由于涉及众多用户参与的内容,评论,收藏等等,触发点多,发生频度相当频繁</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">4页面多,结构复杂,空间占用大</span></strong><br />\r\n&nbsp;&nbsp; &nbsp;通常,需要生成的页面规模是这样粗略估算的,Rn*P,Rn为资源数,P为每个资源的页面数,所谓资源,可以看做一个生成单位,其页面数可以简单看做发布一个资源,就需要生成其所有相关页面数量,比如:发布一个blog,就需要生成一个Blog页,同时还需要生成或者更新个人主页的blog列表,算上个人主页右侧的分类文章数的小块,也就是最多10来个页面或者区域,但是发布一个电影,其相关的页面至少有50个以上,而且有的页面还带有分页,一个信息比较丰富的电影,其页面竟可以达到千个以上,空间10~20M,而且资源总数也不少,电影80000左右,电影人虽然P值较少,但是总量确有几十万之巨,估计静态页面磁盘占用量几百个G</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">5向下兼容</span></strong><br />\r\n&nbsp;&nbsp; &nbsp;这是一个已有系统,旧系统的框框需要突破,但又没有时间,或者不能完全突破,比如Url,已经被收录到搜索引擎,就不能随便调整,还有一些地方,原本没有为静态生成考虑,另一些地方又需要兼容旧的设计</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">6多台前端Web</span></strong><br />\r\n&nbsp;&nbsp; &nbsp;这种结构要求生成的文件可能需要分布到多个服务器(另一个方案是放在几台专用的机器上,等前端来取)</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">7任务紧迫</span></strong><br />\r\n&nbsp;&nbsp; &nbsp;架构讨论结束仪式六月初,离奥运开幕上线只有两月,也就是说所有底层框架实现,页面模板开发,调试测试,动作的整理,必须在7月底全部完成,按我原来估计,光实现这几块的上百个页面模板和填充方法,也需要那么长的时间</p>\r\n\r\n<p>综合考虑上述因素,架构必须要有以下几个方面的特点<br />\r\n1动作可以灵活扩展配置,某个动作对应哪些生成,应该可以配置,并且可以分组<br />\r\n2文件必须有分发机制<br />\r\n3分发和生成必须独立出来,并且支持分布式<br />\r\n4各种的动作,必须转化为消息,发送到生成和分发服务器进行处理<br />\r\n5针对同意资源频繁动作,在变量相同的情况下能够具有合并的能力<br />\r\n6动作必须有记录<br />\r\n7尽量考虑使用已有成熟技术,节省开发时间</p>\r\n\r\n<p><strong><span style=\"font-size:22px\">下面是设计的第一个架构</span></strong></p>\r\n\r\n<p><img alt=\"\" src=\"/data/pic/20150415183039307888.jpg\" style=\"height:272px; width:554px\" /></p>\r\n\r\n<p>用户的动作经过MSMQ<a href=\"#tar1\">[1]</a>传入到生成分发中心(途中绿色箭头)进行处理,,处理中心接受到消息后,负责生成对应的页面或者页面区域,并将页面分发到各个服务器,负载均衡沿用以前的架构,采用微软的NLB<a href=\"#tar2\">[2]</a></p>\r\n\r\n<p>之所以用MSMQ,就是看上了他提供的完整的消息存储恢复机制,这样我们能确保即使服务器down掉重启后,消息依然能正常处理,碰巧我们cms组的同事MSMQ非常熟悉,并且真准备在另外一个项目中使用类似的架构&mdash;于是一拍即合</p>\r\n\r\n<p>页面采用分块存储,这样能保证生成时目标小,开销小,也能重用性,然后再藉由SSI<a href=\"#tar3\">[3]</a>(shtml include)进行整合,之所以采取这样的方案,而不采用Dottext的整合方式,是因为如果采用Dottext的方式,就必须走IIS和.Net的管道<a href=\"#tar4\">[4]</a>,而据测试,经过管道和直接返回html性能有非常大的差异,而使用ssi,在性能上是一个折中,并且可以Light HTTPd等高性能web服务器</p>\r\n\r\n<p>模板生成方式,采用了XSLT和另外一种自定义的模板(我的同事开发的机制,很有趣, 理论上能把传统模板替换的性能开销全部消除),生成的最终产物是shtml,之所以生成shtml是为了使用其ssi(Server Side Include)的特性,保证一定的灵活性,并实现热点数据的分离:某些页面上的部分可能会频繁更新和生成,而其它地方不变,或者某个部分是所有页面通用的(比如页头和页脚),较之php下常常使用smarty,生成php文件,虽然灵活性不如php,但是性能上不相上下,还略高.</p>\r\n\r\n<p>但是这个设计的问题是动态内容和静态内容没有分开,生成的html页面,和动态页面都放在前端服务器上,通过负载均衡访问,也造成了分发服务器需要分发到多台服务器,网络IO效率较低,而且静态内容需要的磁盘空间很大,且小文件非常多,和动态页面混在一起不便于优化,所以第二个方案对生成的静态内容与动态内容使用不同的服务器</p>\r\n\r\n<p><strong><span style=\"font-size:22px\">方案二:</span></strong></p>\r\n\r\n<p><img alt=\"\" src=\"/data/pic/20150415183121922381.jpg\" style=\"height:272px; width:554px\" /></p>\r\n\r\n<p>我们把生成的静态文件单独放置,可以看到,前端增加Nginx,作为跳转,把电影,影人资料库的页面转向静态服务器,其他的调用转向动态服务器,这样我们就可以单独为静态服务器进行优化,比如采用更高效的服务器等等.</p>\r\n\r\n<p>同时减少了文件分发的次数(甚至可以只分发到本机),提高生成分发的处理能力</p>\r\n\r\n<p>更进一步,可以把图片服务分到另外一组机器上,使用独立的域名,比如img.xxx.com,这样可以有效的减少带宽</p>\r\n\r\n<p><strong><span style=\"font-size:22px\">最终完整架构:</span></strong></p>\r\n\r\n<p><img alt=\"\" src=\"/data/pic/20150415183234894284.jpg\" style=\"height:458px; width:554px\" /></p>\r\n\r\n<p><strong><span style=\"font-size:22px\">文件生成分发中心</span></strong></p>\r\n\r\n<p>下图是文件生成分发中心的工作流程图</p>\r\n\r\n<p><img alt=\"\" src=\"/data/pic/20150415183356348922.jpg\" style=\"height:293px; width:526px\" /></p>\r\n\r\n<p>生成服务对外只有一个输入,就是消息,一个输出:静态文件,内部根据消息,从配置文件中找到对应的生成方法,取出相应的模板,进行数据填充</p>\r\n\r\n<p>分发服务主要吧生成服务产生的文件进行分发,分发到前端的N台服务器上,开始考虑得比较复杂,希望分发服务可以跨越协议(本地文件系统,局域网,http协议),跨越多种存储介质(文件系统,数据库),实际最后定下来基本是本地文件系统或者局域网传输</p>\r\n\r\n<p><strong>注:上图中文件分发的部分也可以通过定制MogileFS,来实现分布式文件系统</strong></p>\r\n\r\n<p><strong><span style=\"font-size:22px\">马后炮:</span></strong></p>\r\n\r\n<p>总结起来,静态化除了对架构方面的影响,对开发和测试流程也有影响<br />\r\n<strong><span style=\"font-size:16px\">对测试提出更高的要求:</span></strong><br />\r\n因为一旦上线后,某个页面发现问题,即使是文字的修改,也需要重新生成许多页面,所以测试人员必须非常仔细,测试周期也需要延长</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">开发人员需要掌握模板语言:</span></strong><br />\r\n需要掌握一种模板预言,无论是Xslt还是自己开发的模板语言,都需要花一定的时间掌握</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">需要给第一次生成腾出足够时间:</span></strong><br />\r\n如果不是新系统,那么数据迁移和生成的过程就比较痛苦,由于页面众多,第一次生成的过程可能需要以天来计算,在制定上线方案是就需要考虑到这个方面</p>\r\n\r\n<p>Nginx作为前端的跳转,根据其他网站的经验,应该可以达到2-3万并发连接,但是使用之后,常常有卡壳的情况发生,具体症状为在浏览器中访问页面时,连接超时,或者一直不响应,此时Nginx连接数并不高,好在还有第一套方案可以备用,让我们有时间去解决这个问题,如果大家对这个问题有什么心得,欢迎交流<br />\r\n我的联系方式<br />\r\nMSN:yizhu2000@hotmail.com<br />\r\nGtalk:yizhu2005@gmail.com</p>\r\n\r\n<p><strong><span style=\"font-size:22px\">篇后:</span></strong><br />\r\n在大型web开发上,我感到微软产品结构(包括微软开源社区的成果)在某些方面还存在一些不足:</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">高性能服务器选择太少</span></strong><br />\r\nLinux下可以采用Light HTTPd,Nginx等诸多服务器,这些服务器在很多方面的表现会让Windows下唯一的选择--IIS相形见绌</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">分布式文件系统</span></strong><br />\r\n微软及其社区没有比较著名的产品出现,Linux下有MogileFS</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">微软架构下,文件系统选择太少</span></strong><br />\r\n在Linux下我们可以选择诸如Ext3,ReiserFS,而Windows环境下,NTFS是唯一的选择,不过值得称道的是.NTFS的效率和稳定性都相当不错.</p>\r\n\r\n<p><strong><span style=\"font-size:16px\">开源技术对windows版本的支持态度不积极</span></strong><br />\r\n诸多在Linux下名声卓著的开源产品,又懒于为Windows提供相应的版本,或者提供的windows版本效果差强人意.使得采用微软服务器的厂商少了很多选择</p>\r\n\r\n<p>现在的Web开发已经进入了各种技术大混合,大整合的时代,任何一个厂商都不可能涵盖所有方面,在后端架构和逻辑方面.Net和Java严谨,良好的编程风格,清晰的设计思路,较高的运行效率,以及稳定的配套服务支持,是其最大的优势,对主要擅长微软技术的Web工程师和架构师而言,应该增进对Linux及开源社区的了解,才能根据需求设计出合理的架构</p>\r\n\r\n<hr />\r\n<p><a id=\"tar1\" name=\"tar1\">[1]</a>Message Queuing: A Scalable, Highly Available Load-Balancing Solution<br />\r\nhttp://msdn.microsoft.com/en-us/library/ms811052.aspx</p>\r\n\r\n<p><a id=\"tar2\" name=\"tar2\">[2]</a>网络负载平衡(NLB)详解,注意文章后给出的参考链接<br />\r\nhttp://blog.chinaitlab.com/user1/563173/archives/2007/132713.html</p>\r\n\r\n<p><a id=\"tar3\" name=\"tar3\">[3]</a>怎样使用ssi,及其语法:<br />\r\nhttp://blog.csdn.net/dadou2007/archive/2008/06/08/2521365.aspx<br />\r\nNginx下的ssimodule<br />\r\nhttp://www.nginx.cn/NginxChsHttpSsiModule</p>\r\n\r\n<p><a id=\"tar4\" name=\"tar4\">[4]</a>asp.net的处理机制http://www.microsoft.com/china/msdn/library/webservices/asp.net/dnvs05Internals.mspx?mfr=true<br />\r\nhtml.asp.aspx运行效率比较<br />\r\nhttp://iamlibai.blogbus.com/logs/2017870.html</p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p>朱燚的技术博客,转载请注明出处<br />\r\nhttp://yizhu2000.cnblogs.com<br />\r\nhttp://blog.csdn.net/yizhu2000</p>\r\n',0,1429094245,1429360851,0),(4,8,'windows中使svn提交后自动同步到web目录的方法','<p>windows版<br />\r\n假设你的web server domain是<br />\r\nhttp://your.com<br />\r\n<br />\r\n网站存放于<br />\r\nd:/web/<br />\r\n<br />\r\nsubversion安装在<br />\r\nc:/subversion/<br />\r\n<br />\r\nsvn版本库存放于<br />\r\nd:/test/<br />\r\n<br />\r\nsvn用户名和密码都是test<br />\r\n<br />\r\n需要在本机修改SVN后提交后，网站代码也随之更改。那么可以这样。<br />\r\n<br />\r\n第一步<br />\r\n在d:/web/用TortoiseSVN更新到最新版本库<br />\r\n<br />\r\n第二步<br />\r\n在d:/test/hooks/目录中新建一个post-commit.bat文件，写入以下一行内容<br />\r\nc:/subversion/bin/svn.exe update d:/web --username=test --password=test<br />\r\n<br />\r\n第三步<br />\r\n启动svn服务<br />\r\n命令行中输入<br />\r\nc:/subversion/bin/svnserve.exe --daemon --root d:/test<br />\r\n<br />\r\n测试更改提交一个文件，看看是否能自动同步<br />\r\n<br />\r\nlinux版参考http://blog.ihipop.info/2010/12/1893.html</p>\r\n',0,1429361126,1429361367,0),(5,9,'WEB缓存原理','<p>先简单说下什么是缓存：缓存简单说来就是把一个代码执行过程产生的输出保存起来，可以存放在硬盘，内存，或者其他服务器上，</p>\r\n\r\n<p>缓存可以是任意格式的文件，内容也可以是完整的HTML，HTML片段XML,几个字符，一串字符串，比较常见的就是缓存文件例如smarty,smarttemplate模版的缓存，这个就是保存的html片断，而开源的discuz,phpwind等论坛程序，就是保存的字符串，这个字符串的特点就是一段完整的PHP代码，直接用include包含这个缓存文件就可以得到相关数组。还有些格式比如说小巧的sqlite,将PHP序列化为字符串保存在文件里，用的时候再反序列化等手段，其过程都是类似的。</p>\r\n\r\n<p>现在说更新缓存：通常的做法是在取缓存的时候先根据相关条件（如模版改动，缓存过期数据库变动等）判断缓存文件是否需要更新，如需更新则直接进行缓存更新，所以，一般有这样的代码片段：(以伪代码示例）<br />\r\nif(需要更新缓存==true){<br />\r\n这里就是缓存文件产生过程<br />\r\n}else{<br />\r\n取缓存文件的数据<br />\r\n}</p>\r\n\r\n<p>这样的方式可以称为同步更新缓存，同步更新有几个缺点，一是并发大了的情况，在更新文件的同时，另一个进程正在包含这个文件，有可能造成文件读写错误，二是如果更新过程过于慢长，用户端得到的一片空白，严重降低了用户体验。可以采取异步更新的机制来完善以上2个缺陷：当服务端检查到缓存需要更新，但并不立即更新，输出javascrīpt对客户端进行提示（需要更新缓存，请等待）或者压根就不提示用户，而采用过去缓存，并使用ajax或者包含框架的方式再次请求服务器，这次服务器才更新缓存，下一次请求就稍做检查就用上新缓存了，这样很容易的解决了以上问题，用户体验也不错，感觉不到空白的延迟时间段。</p>\r\n\r\n<p>举一个很简单的例子来说明异步更新缓存的过程：用户查询名字为包含xxx的数据:很明显这个查询语句是select name from table where name like &#39;%xxx%&#39;是全表搜索，name上的索引无效，我们可以把这个查询出来的数据做成xml,或者直接序列化结果保存在文件，文件名就为xxx,如果是搜索yyy的话，我们建立的文件名可以是yyy，遇见下一次查询用户名为xxx的时候，我们就可以直接取这个xxx缓存文件，从而饶开了查询数据库，这个是很好理解的。</p>\r\n\r\n<p>如果某时间insert了name包含xxx的数据，再新的查询中，我们需要进行缓存更新，现在我们则采用异步更新缓存的思路进行：直接给客户端返回js，提示需要等待更新，当新的xxx文件更新之后，服务端再输出js通知更新完毕，然后直接进行结果查看页，这个过程强调了用户体验，用户根本看不到空白的等待返回结果的信息，感觉到整个过程更加流畅。</p>\r\n\r\n<p>实例代码：<br />\r\n&lt;?php<br />\r\ndefine(&quot;_CachePath_&quot;,&quot;./cache/&quot;);<br />\r\ndefine(&quot;_CacheEnable_&quot;,&quot;1&quot;);<br />\r\ndefine(&quot;_ReCacheTime_&quot;,&quot;43200&quot;);<br />\r\ninclude(&#39;cache.php&#39;);<br />\r\n$cache=new cache();<br />\r\nif ($cache-&gt;check()){<br />\r\n&nbsp;&nbsp; &nbsp;$template=$cache-&gt;read();<br />\r\n}else{<br />\r\n&nbsp;&nbsp; &nbsp;ob_start();<br />\r\n&nbsp;&nbsp; &nbsp;ob_implicit_flush(0);<br />\r\n?&gt;<br />\r\n&nbsp;&nbsp; &nbsp;页面内容。。。。<br />\r\n&lt;?php<br />\r\n&nbsp;&nbsp; &nbsp;$template = ob_get_contents();<br />\r\n&nbsp;&nbsp; &nbsp;$cache-&gt;write($template);<br />\r\n}<br />\r\n?&gt;</p>\r\n\r\n<p>&lt;?<br />\r\nclass cache<br />\r\n{<br />\r\n&nbsp;&nbsp; &nbsp;var $cachefile;<br />\r\n&nbsp;&nbsp; &nbsp;var $cachefilevar;</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;function cache()<br />\r\n&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//生成当前页的Cache组文件名 $this-&gt;cachefilevar 及文件名 $this-&gt;cachefile<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//动态页的参数不同对应的Cache文件也不同，但是每一个动态页的所有Cache文件都有相同的文件名，只是扩展名不同<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$s=array(&quot;.&quot;,&quot;/&quot;);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$r=array(&quot;_&quot;,&quot;&quot;);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;cachefilevar=str_replace($s,$r,$_SERVER[&quot;SCRIPT_NAME&quot;]).&quot;_&quot;.$_GET[_ActionVar_];<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;cachefile=$this-&gt;cachefilevar.&quot;.&quot;.md5($_SERVER[&quot;REQUEST_URI&quot;]);<br />\r\n&nbsp;&nbsp; &nbsp;}</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;//删除当前页/模块的缓存<br />\r\n&nbsp;&nbsp; &nbsp;function delete()<br />\r\n&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//删除当前页的缓存<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$d = dir(_CachePath_);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$strlen=strlen($this-&gt;cachefilevar);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//返回当前页的所有Cache文件组<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;while (false !== ($entry = $d-&gt;read()))<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (substr($entry,0,$strlen)==$this-&gt;cachefilevar)<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (!unlink(_CachePath_.&quot;/&quot;.$entry)) {echo &quot;Cache目录无法写入&quot;;exit;}<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;}</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;//判断是否已Cache过，以及是否需要Cache<br />\r\n&nbsp;&nbsp; &nbsp;function check()<br />\r\n&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//如果设置了缓存更新间隔时间 _ReCacheTime_<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (_ReCacheTime_+0&gt;0)<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//返回当前页Cache的最后更新时间<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$var=@file(_CachePath_.&quot;/&quot;.$this-&gt;cachefilevar);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$var=$var[0];<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//如果更新时间超出更新间隔时间则删除Cache文件<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (time()-$var&gt;_ReCacheTime_)<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;delete();$ischage=true;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//返回当前页的Cache<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$file=_CachePath_.&quot;/&quot;.$this-&gt;cachefile;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//判断当前页Cache是否存在 且 Cache功能是否开启<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return (file_exists($file) and _CacheEnable_ and !$ischange);<br />\r\n&nbsp;&nbsp; &nbsp;}</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;//读取Cache<br />\r\n&nbsp;&nbsp; &nbsp;function read()<br />\r\n&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//返回当前页的Cache<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$file=_CachePath_.&quot;/&quot;.$this-&gt;cachefile;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//读取Cache文件的内容<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (_CacheEnable_) return readfile($file);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else return false;<br />\r\n&nbsp;&nbsp; &nbsp;}</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;//生成Cache<br />\r\n&nbsp;&nbsp; &nbsp;function write($output)<br />\r\n&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//返回当前页的Cache<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$file=_CachePath_.&quot;/&quot;.$this-&gt;cachefile;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//如果Cache功能开启<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (_CacheEnable_)<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//把输出的内容写入Cache文件<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$fp=@fopen($file,&#39;w&#39;);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (!@fputs($fp,$output)) {echo &quot;模板Cache写入失败&quot;;exit;}<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;@fclose($fp);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//如果设置了缓存更新间隔时间 _ReCacheTime_<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (_ReCacheTime_+0&gt;0)<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//更新当前页Cache的最后更新时间<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$file=_CachePath_.&quot;/&quot;.$this-&gt;cachefilevar;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$fp=@fopen($file,&#39;w&#39;);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (!@fwrite($fp,time())) {echo &quot;Cache目录无法写入&quot;;exit;}<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;@fclose($fp);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;}<br />\r\n}<br />\r\n?&gt;</p>\r\n',0,1429362221,0,0),(6,10,'PHP5.4为什么不支持VC6','<p>win下的apache是用VC6编译的，其插件(apache module)也必须用VC6编译。<br />\r\nPHP5.4为什么不支持VC6？因为VC6太旧了，1998年的工具..<br />\r\n不能用是指php以apache mod的方式不能用。现代php都以fast-cgi的方式挂载支持apache，连微软iis都放弃isapi转采用fast-cgi了。在不同的进程下，VC9的php fast-cgi通过进程间通讯支持apache，即使apache不是vc不是win版都没问题。。<br />\r\n去下载apache的mod_fcgid，然后把php配置到fcgid上。就可以用了<br />\r\n搜一搜教程很多。</p>\r\n',0,1429362612,0,0),(7,2,'jquery $.fn $.fx是什么意思','<p>$.fn是指jquery的命名空间，加上fn上的方法及属性，会对jquery实例每一个有效。<br />\r\n如扩展$.fn.abc()<br />\r\n那么你可以这样子：$(&quot;#div&quot;).abc();<br />\r\n通常使用extend方法扩展，详细请看API.</p>\r\n\r\n<p>$.fx是指jquery的特效。<br />\r\n如果使用显示、滑动、淡入淡出、动画等。<br />\r\n$.fx.off可以关闭动画，其实是直接显示结果。</p>\r\n\r\n<p>jquery的extend和fn.extend<br />\r\njQuery为开发插件提拱了两个方法，分别是：</p>\r\n\r\n<p>jQuery.fn.extend(object);<br />\r\njQuery.extend(object);</p>\r\n\r\n<p>jQuery.extend(object); 为扩展jQuery类本身.为类添加新的方法。<br />\r\njQuery.fn.extend(object);给jQuery对象添加方法。</p>\r\n\r\n<p><br />\r\nfn 是什么东西呢。查看jQuery代码，就不难发现。</p>\r\n\r\n<p>jQuery.fn = jQuery.prototype = {<br />\r\n&nbsp;&nbsp; &nbsp;init: function( selector, context ) {//....<br />\r\n&nbsp;&nbsp; &nbsp;//......<br />\r\n};</p>\r\n\r\n<p>原来 jQuery.fn = jQuery.prototype.对prototype肯定不会陌生啦。</p>\r\n\r\n<p>虽然 javascript 没有明确的类的概念，但是用类来理解它，会更方便。<br />\r\njQuery便是一个封装得非常好的类，比如我们用 语句 $(&quot;#btn1&quot;) 会生成一个 jQuery类的实例。</p>\r\n\r\n<p>jQuery.extend(object); 为jQuery类添加添加类方法，可以理解为添加静态方法。如：</p>\r\n\r\n<p>$.extend({<br />\r\n&nbsp;&nbsp; &nbsp;add:function(a,b){return a+b;}<br />\r\n});</p>\r\n\r\n<p>便为 jQuery 添加一个为 add 的 &ldquo;静态方法&rdquo;，之后便可以在引入 jQuery 的地方，使用这个方法了，<br />\r\n$.add(3,4); //return 7</p>\r\n\r\n<p>jQuery.fn.extend(object); 对jQuery.prototype进得扩展，就是为jQuery类添加&ldquo;成员函数&rdquo;。jQuery类的实例可以使用这个&ldquo;成员函数&rdquo;。<br />\r\n比如我们要开发一个插件，做一个特殊的编辑框，当它被点击时，便alert 当前编辑框里的内容。可以这么做：<br />\r\nJava代码 $.fn.extend({ alertWhileClick:function(){ $(this).click(function(){ alert($(this).val()); }); } }); $(&quot;#input1&quot;).alertWhileClick(); //页面上为：&lt;input id=&quot;input1&quot; type=&quot;text&quot;/&gt;</p>\r\n\r\n<p>$(&quot;#input1&quot;) 为一个jQuery实例，当它调用成员方法 alertWhileClick后，便实现了扩展，每次被点击时它会先弹出目前编辑里的内容。</p>\r\n\r\n<p>真实的开发过程中，当然不会做这么小白的插件，事实上jQuery提拱了丰富的操作文档，事件，CSS ,Ajax、效果的方法，结合这些方法，便可以开发出更加 Niubility 的插件。</p>\r\n\r\n<p>jquery(function(){})与(function(){}(jQuery)的区别<br />\r\n1.first<br />\r\njQuery(function(){});<br />\r\n全写为<br />\r\njQuery(docunemt).ready(function(){<br />\r\n});<br />\r\n意义为在DOM加载完毕后执行ready()方法<br />\r\n2.<br />\r\n(funtion(){<br />\r\n})(jQuery);<br />\r\n实际执行()(para)匿名方法，只不过传递了jQuery对象。<br />\r\n总结：jQuery(funtion(){});用于存放DOM对象的代码，执行其中代码时DOM对象已经存在。<br />\r\n不可用于存放开发插件代码。因为jQuery对象没有得到传递，外部通过jQuery.methodye<br />\r\n调用不来其中方法。<br />\r\n(funtion(){<br />\r\n})(jQuery);用于存放开发插件的代码，执行其中代码DOM不一定存在，直接自动执行DOM操作代码请小心使用</p>\r\n',0,1429362869,0,0),(8,3,'js+css无限级菜单实例','<p>&lt;!doctype html&gt;<br />\r\n&lt;html&gt;<br />\r\n&lt;head&gt;<br />\r\n&lt;title&gt;css+js无限级菜单&lt;/title&gt;<br />\r\n&lt;meta charset=&quot;UTF-8&quot;&gt;<br />\r\n&lt;style type=&quot;text/css&quot;&gt;<br />\r\n*{margin:0; padding:0; border:0;}<br />\r\nbody{font:12px/130% verdana,geneva,arial,helvetica,sans-serif,宋体;}li{list-style:none;}<br />\r\n.clearfix:after{content:&quot;&amp;nbsp;&quot;;display:block;height:0;clear:both;visibility:hidden;}.clearfix{display:inline-block;}<br />\r\na:link{ color:#000; text-decoration:none; }<br />\r\na:visited{ color:#000; text-decoration:none; }<br />\r\na:hover{ color:#000; text-decoration:none; }<br />\r\n.menu{ width:778px; height:26px; background:#fff; margin:0 auto;}<br />\r\n.menusel{ float:left;width:100px; position:relative; height:25px; background:#ddd; line-height: 25px; margin-left: 1px; *margin-left: 0px;_margin-left: -1px;}<br />\r\n.menusel h2{ font-size:12px; }<br />\r\n.menusel a{ display: block;text-align:center; width:100px;border:1px solid #a4a4a4; height:25px; border-bottom:1px solid #a4a4a4; position:relative; z-index:2;}<br />\r\n.menusel a:hover{ border:1px solid #a4a4a4; border-bottom:1px dashed #eeeeee; position:relative; z-index:2; height:25px;}<br />\r\n.ahover a{border-bottom:1px dashed #eeeeee; background:#eeeeee; }<br />\r\n.position{ position:absolute; z-index:1;}<br />\r\n.menusel ul{width:125px; background:#eee; border:1px solid #a4a4a4; margin-top: -1px; position:relative; z-index:1; display:none;}<br />\r\n.menusel .block{ display:block;}<br />\r\n.typeul li{border-bottom:1px dashed #a4a4a4;width:125px; position:relative; float:left; }<br />\r\n.typeul li a{ border:none;width:125px; }<br />\r\n.typeul li a:hover{ border:none; background:#ddd;}<br />\r\n.typeul{&nbsp; margin-left:0;&nbsp; }<br />\r\n.typeul ul{left:125px; top:0; position:absolute;}<br />\r\n.fli{ margin-left: -1px; border-left:#eeeeee solid 1px;}<br />\r\n.menusel .lli{ border:none; }<br />\r\n&lt;/style&gt;<br />\r\n&lt;script type=&quot;text/javascript&quot;&gt;document.execCommand(&quot;BackgroundImageCache&quot;, false, true);&lt;/script&gt;&lt;!-- IE6背景图片闪烁问题&nbsp; --&gt;<br />\r\n&lt;/head&gt;<br />\r\n&lt;body&gt;<br />\r\n&lt;div class=&quot;menu&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&lt;div id=&quot;menu1&quot; class=&quot;menusel&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;h2&gt;&lt;a href=&quot;http://www.codefans.net/jscss/&quot;&gt;菜单1&lt;/a&gt;&lt;/h2&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;div class=&quot;position&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;ul class=&quot;clearfix typeul&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li&gt;&lt;a href=&quot;#&quot;&gt;菜单选项1-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;a href=&quot;#&quot;&gt;菜单选项1-2&lt;/a&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;fli&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;a href=&quot;#&quot;&gt;菜单选项1-2-1&lt;/a&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li&gt;&lt;a href=&quot;#&quot;&gt;菜单选项1-3-1&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li&gt;&lt;a href=&quot;#&quot;&gt;菜单选项1-3-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;lli&quot;&gt;&lt;a href=&quot;#&quot;&gt;菜单选项1-2-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li&gt;&lt;a href=&quot;http://www.codefans.net&quot;&gt;菜单选项1-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;lli&quot;&gt;&lt;a href=&quot;#&quot;&gt;菜单选项1-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/div&gt;&lt;!-- position --&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&lt;/div&gt;&lt;!-- menusel --&gt;</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;&lt;div id=&quot;menu2&quot; class=&quot;menusel&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;h2&gt;&lt;a href=&quot;#&quot;&gt;菜单2&lt;/a&gt;&lt;/h2&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;div class=&quot;position&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;ul class=&quot;clearfix typeul&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li&gt;&lt;a href=&quot;#&quot;&gt;菜单选项2-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;a href=&quot;#&quot;&gt;菜单选项2-2&lt;/a&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;fli&quot;&gt;&lt;a href=&quot;#&quot;&gt;菜单选项2-2-1&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;lli&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;a href=&quot;#&quot;&gt;菜单选项2-2-2&lt;/a&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;fli&quot;&gt;&lt;a href=&quot;#&quot;&gt;菜单选项2-2-1&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;lli&quot;&gt;&lt;a href=&quot;#&quot;&gt;菜单选项2-2-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li&gt;&lt;a href=&quot;#&quot;&gt;菜单选项2-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;lli&quot;&gt;&lt;a href=&quot;#&quot;&gt;菜单选项2-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/div&gt;&lt;!-- position --&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&lt;/div&gt;&lt;!-- menusel --&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&lt;div id=&quot;menu3&quot; class=&quot;menusel&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;h2&gt;&lt;a href=&quot;#&quot;&gt;菜单3&lt;/a&gt;&lt;/h2&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;div class=&quot;position&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;ul class=&quot;clearfix typeul&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li&gt;&lt;a href=&quot;#&quot;&gt;菜单选项3-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;a href=&quot;#&quot;&gt;菜单选项3-2&lt;/a&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;fli&quot;&gt;&lt;a href=&quot;#&quot;&gt;菜单选项3-2-1&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;lli&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;a href=&quot;#&quot;&gt;菜单选项3-2-2&lt;/a&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;fli&quot;&gt;&lt;a href=&quot;#&quot;&gt;菜单选项3-2-1&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;lli&quot;&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;a href=&quot;#&quot;&gt;菜单选项3-2-2&lt;/a&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;fli&quot;&gt;&lt;a href=&quot;#&quot;&gt;菜单选项3-2-1&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;lli&quot;&gt;&lt;a href=&quot;#&quot;&gt;菜单选项3-2-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li&gt;&lt;a href=&quot;#&quot;&gt;菜单选项3-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;li class=&quot;lli&quot;&gt;&lt;a href=&quot;#&quot;&gt;菜单选项3-2&lt;/a&gt;&lt;/li&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/ul&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/div&gt;&lt;!-- position --&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&lt;/div&gt;&lt;!-- menusel --&gt;<br />\r\n&lt;/div&gt;&lt;!-- menu --&gt;<br />\r\n&lt;script type=&quot;text/javascript&quot;&gt;<br />\r\nfor(var x = 1; x &lt; 4; x++)<br />\r\n{<br />\r\n&nbsp;&nbsp; &nbsp;var menuid = document.getElementById(&quot;menu&quot;+x);<br />\r\n&nbsp;&nbsp; &nbsp;menuid.num = x;<br />\r\n&nbsp;&nbsp; &nbsp;type();<br />\r\n}<br />\r\nfunction type()<br />\r\n{<br />\r\n&nbsp;&nbsp; &nbsp;var menuh2 = menuid.getElementsByTagName(&quot;h2&quot;);<br />\r\n&nbsp;&nbsp; &nbsp;var menuul = menuid.getElementsByTagName(&quot;ul&quot;);<br />\r\n&nbsp;&nbsp; &nbsp;var menuli = menuul[0].getElementsByTagName(&quot;li&quot;);<br />\r\n&nbsp;&nbsp; &nbsp;menuh2[0].onmouseover = show;<br />\r\n&nbsp;&nbsp; &nbsp;menuh2[0].onmouseout = unshow;<br />\r\n&nbsp;&nbsp; &nbsp;menuul[0].onmouseover = show;<br />\r\n&nbsp;&nbsp; &nbsp;menuul[0].onmouseout = unshow;<br />\r\n&nbsp;&nbsp; &nbsp;function show()<br />\r\n&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;menuul[0].className = &quot;clearfix typeul block&quot;<br />\r\n&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;function unshow()<br />\r\n&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;menuul[0].className = &quot;typeul&quot;<br />\r\n&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;for(var i = 0; i &lt; menuli.length; i++)<br />\r\n&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;menuli[i].num = i;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var liul = menuli[i].getElementsByTagName(&quot;ul&quot;)[0];<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(liul)<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;typeshow();<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;function typeshow()<br />\r\n&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;menuli[i].onmouseover = showul;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;menuli[i].onmouseout = unshowul;<br />\r\n&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;function showul()<br />\r\n&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;menuli[this.num].getElementsByTagName(&quot;ul&quot;)[0].className = &quot;block&quot;;<br />\r\n&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;function unshowul()<br />\r\n&nbsp;&nbsp; &nbsp;{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;menuli[this.num].getElementsByTagName(&quot;ul&quot;)[0].className = &quot;&quot;;<br />\r\n&nbsp;&nbsp; &nbsp;}<br />\r\n}<br />\r\n&lt;/script&gt;<br />\r\n&lt;/body&gt;<br />\r\n&lt;/html&gt;</p>\r\n',1,1429363940,0,0),(9,8,'Windows下的SVN服务器安装及配置','<p>准备工作</p>\r\n\r\n<p>首先先下载Windows版本的SVN服务器(各位都会使用搜索引擎所以就不提供下载 地址了),这里我以svn-win32-1.4.3的ZIP解压缩版为例,将其解压缩到目标目录,例如我是解压到D盘下的Subversion目录,把 D:\\Subversion\\bin加到系统环境变量,如果你的解压位置与我不同,那么请按照你的实际路径设置环境变量。</p>\r\n\r\n<p>第一步:创建SVN数据库</p>\r\n\r\n<p>打开Windows命令提示符,执行命令svnadmin create F:\\SVN,svnadmin create是创建SVN数据库的命令,F:\\SVN是你的SVN数据库位置,这里我只是举个例子,你可以自己决定SVN数据库位置,执行完以上命令后就 会在F盘下多出一个SVN目录,里面有若干目录和文件,conf目录是用来存放权限配置的,后面会详细说明,dav目录用来提供给apache和 mod_dav_svn存储内部数据,db目录是所有版本控制的数据文件,hooks目录用来放置hook脚本文件,locks目录存放 Subversion文件库锁定数据,用来追踪存取文件库的客户端,format是一个文本文件,里面只放了一个整数,表示当前文件库配置的版本号,还有 个readme.txt不用说也知道是干什么的了。</p>\r\n\r\n<p>第二步:启动SVN服务器</p>\r\n\r\n<p>继续在Windows命令提示符里执行命令svnserve -d -r F:\\SVN,参数-d是将SVN服务做为后台服务,参数-r是指定SVN服务的根目录位置,F:\\SVN自然就是SVN根目录了,到这里为止SVN服务 器就已经启动了,可以用SVN客户端测试一下。</p>\r\n\r\n<p>第三步:将SVN服务注册为系统服务</p>\r\n\r\n<p>你可能会问这样岂不是每次启动SVN服务器都要输入一次命令?怎样才能让SVN服务器在开机的时候自动启动呢?答案就是将SVN服务注册到 Windows系统服务,在Windows命令提示符里执行命令<br />\r\nsc create SVN binpath= &quot;\\&quot;d:\\subversion\\bin\\svnserve.exe\\&quot; --service -r F:\\SVN&quot; displayname= &quot;SVN Service&quot; depend= Tcpip start= auto,这个命令是不是有点长?其实很容易理解,sc是Windows自带的系统服务注册工具,微软支持中心 提 供了详细的说明,这里我就不再复述了,参数binpath= &quot;\\&quot;d:\\subversion\\bin\\svnserve.exe\\&quot; --service -r F:\\SVN&quot;和我们前面手动启动SVN服务器的命令很像吧?只是把-d改成了--service,这不难理解,因为现在是服务嘛。好了,现在已经大功告 成了,重起一下试试吧。<br />\r\nPS:如果想从系统服务里删除刚才注册的SVN服务可以使用sc delete SVN命令。</p>\r\n\r\n<p>第四步:设置权限</p>\r\n\r\n<p>各位都是做IT的,为研发中的项目设置合理的权限有多重要就不需要我说了,就拿开发游戏来说吧,程序部门需要有源代码目录的所有权限以及美术资源目录和 策划案目录的获取权限,美术部门需要有美术资源目录的所有权限以及策划案目录的获取权限,而策划部门则需要有策划案目录的所有权限及美术资源目录的获取权 限。接下去就来看看SVN是如何设置权限的,还记得第一步创建SVN数据库时提到的conf目录吧,conf目录里有3个文件,这3个都是文本文件,用计 事本打开它们就行了,我们先看svnserve.conf文件,anon-access项指定了未经验证的用户所具有的操作权限,它有3个有效值,分别是 read,write,none,read为读权限,write为写权限,none为没有任何权限,password-db项用来指定存放用户名和密码的 文件,authz-db项用来指定存放用户权限的文件,realm项用来指定验证范围,这项一般情况下用不到,以上4项默认都是被注释掉的.#号为注释 符,要起用它们只需要把注释符去掉即可。passwd文件是默认存放用户名和密码的文件,例如我设置一个Sol用户,密码为111111,只需在 [users]下添加Sol=111111即可,authz文件是默认指定存放用户权限的文件,[groups]代表分组,这里我们设置个 developer组,将前面创建的Sol用户分到developer组里,同样只需在[groups]下写上developer=Sol即可,[/]代 表根目录,如果我们要设置developer组有完全的访问权限就在下面加上@developer=rw,前面加@符代表组,除此之外我们允许所有人都有 读取权限还要在下面加上*=r,SVN允许对每个目录设置权限,设置方法和根目录差不多,如果到这里你还不是很明白那么请看下面的例子。</p>\r\n\r\n<p>一个权限配置的例子</p>\r\n\r\n<p>我们以游戏项目开发为例,项目名就叫Project1吧,怎么创建SVN数据库上面已经说过了,我们在SVN的根目录下创建一个名为Project1的 本地数据库,先配置conf目录下的svnserve.conf文件,我们不允许任何与研发无关的人员访问此项目,因此我们禁止匿名访问并为每个研发人员 创建个人帐号,权限文件和帐户信息文件用默认同目录下的authz文件和passwd文件就行了。</p>\r\n\r\n<p>svnserve.conf文件配置如下:</p>\r\n\r\n<p>[general]<br />\r\nanon-access = none<br />\r\npassword-db = passwd<br />\r\nauthz-db = authz</p>\r\n\r\n<p>接下去配置passwd文件,为每个研发人员设置个人帐户,假设项目负责人是Sol,程序部门有Tom、Mark,美术部门有John、Alina、 Candice、Ellen,策划部门有Terry、Jane,这里我们为了方便将密码全部设置为000000,现在是例子没关系,实际应用的时候密码就 不能这么随便设置了。</p>\r\n\r\n<p>passwd文件配置如下:</p>\r\n\r\n<p>[users]<br />\r\nSol = 000000<br />\r\nTom = 000000<br />\r\nMark = 000000<br />\r\nJohn = 000000<br />\r\nAlina = 000000<br />\r\nCandice = 000000<br />\r\nEllen = 000000<br />\r\nTerry = 000000<br />\r\nJane = 000000</p>\r\n\r\n<p>帐户都创建好了,现在为他们分配不同的权限,先设置4个组.分别是manager 、developer、artist、designer,将Sol分配到manager组里,将Tom、Mark分配到developer组,将 John、Alina、Candice、Ellen分配到artist组,将Terry、Jane分配到designer组,等会我们会在项目中创建 designs、sources、resources、reports这4个目录,然后在reports目录里为每个人创建一个以自己帐户命名的目录用来 放每个人的工作报告,manager组拥有所有目录的读写权限,developer组拥有sources目录的读写权限以及designs和 resources目录的读取权限,artist组拥有resources目录的读写权限以及designs目录的读取权限,designer组拥有 designs目录的读写权限以及resources目录的读取权限,每个帐户都拥有reports目录下以自己帐户命名的目录的读写权限,也就是说每个 人的工作报告只有自己和项目负责人能看到。</p>\r\n\r\n<p>authz文件配置如下:</p>\r\n\r\n<p>[groups]<br />\r\nmanager = Sol<br />\r\ndeveloper = Tom,Mark<br />\r\nartist = John,Alina,Candice,Ellen<br />\r\ndesigner = Terry,Jane</p>\r\n\r\n<p>[Project1:/]<br />\r\n@manager = rw<br />\r\n* = r</p>\r\n\r\n<p>[Project1:/designs]<br />\r\n@manager = rw<br />\r\n@developer = r<br />\r\n@artist = r<br />\r\n@designer = rw<br />\r\n* = &nbsp;</p>\r\n\r\n<p>[Project1:/sources]<br />\r\n@manager = rw<br />\r\n@developer = rw<br />\r\n* =</p>\r\n\r\n<p>[Project1:/resources]<br />\r\n@manager = rw<br />\r\n@developer = r<br />\r\n@artist = rw<br />\r\n@designer = r<br />\r\n* =</p>\r\n\r\n<p>[Project1:/reports/Sol]<br />\r\nSol = rw<br />\r\n* =</p>\r\n\r\n<p>[Project1:/reports/Tom]<br />\r\n@manager = rw<br />\r\nTom = rw<br />\r\n* =</p>\r\n\r\n<p>[Project1:/reports/Mark]<br />\r\n@manager = rw<br />\r\nMark = rw<br />\r\n* =</p>\r\n\r\n<p>[Project1:/reports/John]<br />\r\n@manager = rw<br />\r\nJohn = rw<br />\r\n* =</p>\r\n\r\n<p>[Project1:/reports/Alina]<br />\r\n@manager = rw<br />\r\nAlina = rw<br />\r\n* =</p>\r\n\r\n<p>[Project1:/reports/Candice]<br />\r\n@manager = rw<br />\r\nCandice = rw<br />\r\n* =</p>\r\n\r\n<p>[Project1:/reports/Ellen]<br />\r\n@manager = rw<br />\r\nEllen = rw<br />\r\n* =</p>\r\n\r\n<p>[Project1:/reports/Terry]<br />\r\n@manager = rw<br />\r\nTerry = rw<br />\r\n* =</p>\r\n\r\n<p>[Project1:/reports/Jane]<br />\r\n@manager = rw<br />\r\nJane = rw<br />\r\n* =</p>\r\n\r\n<p>目录的权限都设置完了,但是目录我们还没有创建,现在只有项目负责人才有权限在项目根目录下创建目录,所以我们用Sol的帐户来创建designs、 reports、resources、sources这4个目录,然后再到reports目录里为每个人创建以各自帐户命名的工作报告目录,好了,到这里 就全部搞定了,收工。</p>\r\n',0,1429364385,0,0),(10,8,'svn与apache结合','<p><strong><span style=\"font-size:20px\">svn与apache结合一</span></strong><br />\r\n关键字: svn与apache结合</p>\r\n\r\n<p>1. 安装与svn对应的apache版本</p>\r\n\r\n<p>2.把svn安装目录下（比如：D:\\Program Files\\Subversion\\bin）的mod_authz_svn.so和mod_dav_svn.so文件拷贝到apache的安装目录（D:\\Program Files\\Apache Group\\Apache2\\modules）下</p>\r\n\r\n<p>3.修改D:\\Program Files\\Apache Group\\Apache2\\conf\\httpd.conf文件</p>\r\n\r\n<p>因为apache和svn整合需要依赖的2个Module(145,146行)</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; LoadModule cgi_module modules/mod_cgi.so&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; LoadModule dav_module modules/mod_dav.so &nbsp;</p>\r\n\r\n<p>把这2行注释取消</p>\r\n\r\n<p>同时添加svn的Module：</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; LoadModule dav_svn_module modules/mod_dav_svn.so&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; LoadModule authz_svn_module modules/mod_authz_svn.so &nbsp;</p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p>最后在配置请求：</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; &lt;Location /svn&gt; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; DAV svn&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; SVNPath D:/svn/reponsitory&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; Location&gt; &nbsp;</p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p>重启apache. 现在svn仓库里的文件都可以通过apache来访问了：</p>\r\n\r\n<p>比如：</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; http://localhost/svn/ &nbsp;</p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p>&nbsp;如果这样配置的话，因为没有配置认证信息，所以，任何人都可以访问。</p>\r\n\r\n<p>如果把Location部分改为：</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; &lt;Location /svn&gt; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; DAV svn&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; SVNPath D:/svn/reponsitory&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthType Basic&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthName &quot;Subversion Reponsitory&quot;&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthUserFile d:/test/passwords&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; Require valid-user&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; &lt;/Location&gt; &nbsp;</p>\r\n\r\n<p>AuthType:认证类型<br />\r\nAuthName:弹出认证窗口时的标题<br />\r\nAuthUserFile:认证用户名和密码文件，默认是密码是md5加密<br />\r\nRequire valid-user:是否需要认证</p>\r\n\r\n<p><br />\r\nD:\\Program Files\\Apache Group\\Apache2\\bin下有个htpasswd命令<br />\r\nhtpasswd help可以查看具体用法<br />\r\n-c是新建立个密码文件<br />\r\n如：</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; htpasswd -c c:/test/passwords admin&nbsp; &nbsp;</p>\r\n\r\n<p>回车后就会提示输入新添加的admin用户的密码<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />\r\n不带-c参数是追加一个新用户test</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; htpasswd&nbsp; c:/test/passwords test &nbsp;</p>\r\n\r\n<p><br />\r\n-p是密码不加密，如：</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; htpasswd -p d:/test/passwords test1 &nbsp;</p>\r\n\r\n<p><br />\r\n<span style=\"color:#FF0000\">如果2个用户的密码都是md5加密的，并且密码一样，在密码文件里存的也是不一样的。<br />\r\n如果直接在密码文件里输入内容，按照一定的明文格式来新添加用户和密码也是可以的。</span></p>\r\n\r\n<p><br />\r\ntelnet www.wsay.net 80 ,默认端口23 ,所以在这里要写80<br />\r\nHead / HTTP/1.1<br />\r\nHost: www.wsay.net</p>\r\n\r\n<p><br />\r\nGet /index.html HTTP/1.1<br />\r\nHost: www.wsay.net<br />\r\n<a href=\"http://ttitfly.javaeye.com/blog/136467\">策略模式(Strategy模式)</a> | <a href=\"http://ttitfly.javaeye.com/blog/134570\">svn与apache结合一</a><br />\r\n2007-10-22<br />\r\n<strong><span style=\"font-size:20px\">svn与apache结合二</span></strong><br />\r\n关键字: svn与apache结合高级</p>\r\n\r\n<p>1. 如果将Location部分的SVNPath改为SVNParentPath,如下：<br />\r\nxml 代码</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; &lt;Location /svn&gt; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; DAV svn&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; SVNParentPath D:/svn/reponsitory&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthType Basic&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthName &quot;Subversion Reponsitory&quot;&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthUserFile d:/test/passwords&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; Require valid-user&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; &lt;/Location&gt; &nbsp;</p>\r\n\r\n<p><br />\r\n则svn 的父仓库我们都无法访问到了，只能访问它的子仓库。</p>\r\n\r\n<p>所以需要建立子仓库：</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; svnadmin create d:/svn/reponsitory/child1 &nbsp;</p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p>现在如果你向仓库里导入一个project,比如用TortoiseSVN&nbsp; 来import&nbsp; ,如果你再地址栏里输入：</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; http://localhost/svn/aaa &nbsp;</p>\r\n\r\n<p>则<span style=\"color:#FF0000\">表示aaa必须是个已经存在的子仓库</span>。否则失败</p>\r\n\r\n<p>查看的话也是一样的，比如：</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; http://localhost/svn/bbbb &nbsp;</p>\r\n\r\n<p><br />\r\n<span style=\"color:#FF0000\">则bbbb也是个已经存在的子仓库。而不是父仓库下的bbbb项目。因为bbbb项目你是没办法访问到了</span></p>\r\n\r\n<p>如果Require valid-user改为下面：</p>\r\n\r\n<p>则表示匿名用户可以有读权限，而没有写和修改的权限 <span style=\"color:#FF0000\">（一个用户对所有子仓库里的项目权限都是一样的。）</span></p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; &lt;Location /svn&gt; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; DAV svn&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; SVNParentPath D:/svn/reponsitory&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthType Basic&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthName &quot;Subversion Reponsitory&quot;&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthUserFile d:/test/passwords&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; &lt;LimitExcept GET PROPFIND OPTIONS REPORT&gt; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; Require valid-user&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; &lt;/LimitExcept&gt; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; &lt;/Location&gt; &nbsp;</p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p>如果再增加个策略文件，<span style=\"color:#FF0000\">（一个用户对所有子仓库里的项目权限都是不一样的。）</span>修改为：</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; &lt;Location /svn&gt; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; DAV svn&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; SVNParentPath D:/svn/reponsitory&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthzSVNAccessFile d:/passwd/policy&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthType Basic&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthName &quot;Subversion Reponsitory&quot;&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; AuthUserFile d:/test/passwords&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; Require valid-user&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; &lt;/Location&gt; &nbsp;</p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p>编写策略文件内容d:/passwd/policy:</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; [subresponsitory:/]&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; user1=rw&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; user2=r&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; user3= &nbsp;</p>\r\n\r\n<p><span style=\"color:#FF0000\">subresponsitory:/表示子仓库subresponsitory下所有的项目</span></p>\r\n\r\n<p><span style=\"color:#FF0000\">如果某个子仓库没有在策略文件里配置，那么默认是所有用户都没有权限访问</span></p>\r\n\r\n<p>用户组</p>\r\n\r\n<p>策略文件里修改为：</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; [groups]&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; developers=user1,user2&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; testers=user3 &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; #testers=@developers,user3也可以&nbsp; &nbsp;</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; [subsvn:/]&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; @developers=rw &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; @testers=&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; #这里也可以继续添加用户比如 user4=r &nbsp;</p>\r\n\r\n<p><br />\r\n备份：</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp; svnadmin hotcopy d:/svn/reponsitory d:/backup&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; svnadmin hotcopy d:/svn/reponsitory ftp://11.222.11.2&nbsp; &nbsp;<br />\r\n&nbsp;&nbsp;&nbsp; #reponsitory下的内容拷贝到backup目录下，reponsitory本身不会被拷贝</p>\r\n',0,1429365031,0,0),(11,10,'四十条测试你是不是合格的PHP程序员','<p>四十条测试你是否合格的PHP程序员,不官方，也不权威，但很给力。超过三条就不合格了。超过五条就得好好反省下自己的不足了。2011我来了~<br />\r\n1. 不会利用如phpDoc这样的工具来恰当地注释你的代码<br />\r\n2. 对优秀的集成开发环境如 EclipsePHP EPP 或 Zend Studio PDT视而不见<br />\r\n3. 从未用过任何形式的版本控制系统，如Subclipse<br />\r\n4. 不采用某种编码与命名标准，以及通用约定，不能在项目开发周期里贯彻落实<br />\r\n5. 不使用统一开发方式<br />\r\n6. 不转换(或)也不验证某些输入或SQL查询串(译注：参考PHP相关函数)<br />\r\n7. 不在编码之前彻底规划你的程序<br />\r\n8. 不使用测试驱动开发<br />\r\n9. 不在错误开启状态下进行编码和测试(译注：参考PHP函数error_reporting)<br />\r\n10. 对调试器的好处视而不见<br />\r\n11. 不重构你的代码<br />\r\n12. 不使用类似MVC模式把程序的不同层次划分开<br />\r\n13. 不知道这些概念：KISS, DRY, MVC, OOP, REST<br />\r\n14. 不用return而是直接在你的函数或类中输出(echo/print)内容<br />\r\n15. 对单元测试或通用测试的优点视而不见<br />\r\n16. 总是返回硬编码的HTML，却不返回纯粹的数据，字符串，或对象<br />\r\n17. 总是对&ldquo;消息&rdquo;和&ldquo;配置参数&rdquo;进行硬编码<br />\r\n18. 不对SQL查询语句做优化<br />\r\n19. 不使用__autoload(译注：参考PHP手册相关描述)<br />\r\n20. 不允许智能错误处理(译注：参考PEAR的ErrorStack)<br />\r\n21. 使用$_GET替代$_POST来做具有破坏性的传递操作<br />\r\n22. 不知道怎么利用正则表达式<br />\r\n23. 从未听说过SQL注入或跨站脚本<br />\r\n24. 不允许简易配置，也不允许类的构造函数接受参数传递而后执行set/get方法，或运行时的常量定义<br />\r\n25. 不理解面向对象编程(OOP)的优势和劣势<br />\r\n26. 不视情形大小而滥用OOP<br />\r\n27. 自认为实现可复用的软件一定等于/需要让你的代码遵循OOP<br />\r\n28. 不利用智能缺省值<br />\r\n29. 没有单一的配置文件<br />\r\n30. 不想暴露文件源码，却用.inc后缀名取代了.php<br />\r\n31. 不使用数据库抽象层<br />\r\n32. 不能保持DRY作风，即不重复自己，如果你总是在复制粘贴一些东西，说明你设计得很差劲<br />\r\n33. 没有实现让一个函数/类/方法只做一件事，也不能组合利用它们<br />\r\n34. 没能尝试OOP的特长，如抽象类、接口、多态、继承，访问控制修饰符(译注：如public, private, protected)<br />\r\n35. 不用现有的设计模式优化你的程序体系设计<br />\r\n36. 不允许你的用户在你拥有很多文件或目录的情况下定义基础目录<br />\r\n37. 污染了名称空间，比如用常见字符串命名你的库函数<br />\r\n38. 使用数据库表时不使用表前缀<br />\r\n39. 不使用统一的模板引擎<br />\r\n40. 不关注已有的PHP开发框架，懒于探索;其实先进的开发理念和美妙代码就蕴含其中。</p>\r\n',0,1429425490,0,0),(12,12,'一个简单的MVC模式例子','<p>为了更好的展示MVC是如何工作的，我们使用一个简单的新闻发布系统作为例子来说明，其中一个系统使用了MVC模式，另一个没有使用。<br />\r\n要从数据库中获取一系列的新闻文章并显示，最基本的方法就是创建一个php脚本连接至一个数据库，查询这个数据库，然后循环处理结果，并输出对应的各文章的HTML。<br />\r\n以下的代码显示了这样一个脚本：<br />\r\n&lt;?php<br />\r\nmysql_connect(...);<br />\r\n$result = mysql_query(&quot;select * from news order by article_date desc&quot;);<br />\r\n?&gt;<br />\r\n&lt;html&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&lt;/body&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;h1&gt;New Article&lt;/h1&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;?php while($row = mysql_fetch_object($result)){ ?&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;h2&gt;&lt;?php echo $row-&gt;headline; ?&gt;&lt;/h2&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;p&gt;&lt;?php echo $row-&gt;body; ?&gt;&lt;/p&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;?php } ?&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&lt;/body&gt;<br />\r\n&lt;/html&gt;<br />\r\n诸如这样的脚本存在一个问题：很难维护。因为php代码和html代码，连接数据库代码和前台代码混在一起。<br />\r\n现在考虑使用MVC模式实现这个代码。这里最主要的是做两个重大的改变，首先是把从数据库获取文件的代码转移到一个可以重用的组件中（php类或者函数）。然后调用这<br />\r\n个新函数来获取文章，从而可以使用html来输出。按照MVC的术语来讲，这个新的php类或者函数就是模型（M）。<br />\r\n第二个重大的改变就是将获取文章的调用与与具体的html分离。尽管这个改变不像第一个那么的意义重大，但是它也是很重要的，因为这样一来，就可以修改html代码而不<br />\r\n必担心html中使用的数据是如何生成的。用MVC的术语来讲，这就是将控制器（C）和视图（V）分离。<br />\r\n采用MVC模式之后，将建立三个文件。模型为：<br />\r\n&lt;?php<br />\r\nfunction get_articles()<br />\r\n{<br />\r\n&nbsp;&nbsp; &nbsp;mysql_connect();<br />\r\n&nbsp;&nbsp; &nbsp;$result = mysql_query(&quot;select * from news order by article_date desc&quot;);<br />\r\n&nbsp;&nbsp; &nbsp;$articles = array();<br />\r\n&nbsp;&nbsp; &nbsp;while($row = mysql_fetch_objects($result)){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$articles[] = $row;<br />\r\n&nbsp;&nbsp; &nbsp;}<br />\r\n}<br />\r\n?&gt;<br />\r\n控制器为：<br />\r\n&lt;?php<br />\r\n$articles = get_articles();<br />\r\ndisplay_template(&quot;articles.tpl&quot;);<br />\r\n?&gt;<br />\r\n视图如下：<br />\r\n&lt;html&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&lt;body&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;h1&gt;News Articles&lt;/h1&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;?php foreach($articles as $row) { ?&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;h2&gt;&lt;?php echo $row-&gt;headline; ?&gt;&lt;/h2&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;p&gt;&lt;?php echo $row-&gt;body; ?&gt; &lt;/p&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;?php } ?&gt;<br />\r\n&nbsp;&nbsp; &nbsp;&lt;/body&gt;<br />\r\n&lt;/html&gt;</p>\r\n',0,1429427618,0,0),(13,13,'html锁屏代码','<p>前不久有个正要毕业的网友给我发邮件，他毕业设计需要实现锁屏的效果，但是他没有能看懂我之前发布的对话框源码，他问能不能把锁屏相关代码说明下，我当时说过两天就发。由于最近比较忙，我现在才想起来，但愿现在此文还来得及。</p>\r\n\r\n<p>步入正题：<br />\r\n现在全屏的半透明遮罩层在web2.0网站应用非常广泛了，绝大多数遮罩是通过计算页面大小，然后覆盖一个与页面同等大小的层实现，如腾讯qzone， wordpress后台。这种方式本来无可非议，但是在页面很长的时候在IE8下会失效（国外资料的解释是与机器显卡相关），有些完美情节的同学遇到这个问题后就抓破了头，无奈之下甚至想让IE8强制使用IE7的方式解析他的作品。其实我们有一个更好的方法，咱们用CSS去解决它！</p>\r\n\r\n<p>还记得&ldquo;position:fixed&rdquo;吗？它是css2的一个新增的属性，他可以让一个元素静止在页面上，拖动滚动条也不会动，如Qzone顶部固定的导航栏就是这样实现的。同样我们也可以用一个100%高宽的层覆盖浏览器视口，这样就可以实现全屏遮罩了，不用再计算页面的大小，调整浏览器大小的时候也不要去动态修改尺寸了。</p>\r\n\r\n<p>以下为引用的内容：<br />\r\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;<br />\r\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;<br />\r\n&lt;head&gt;<br />\r\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;<br />\r\n&lt;title&gt;lock page&lt;/title&gt;<br />\r\n&lt;meta name=&quot;author&quot; content=&quot;www.planeart.cn&quot; /&gt;<br />\r\n&lt;style&gt;<br />\r\n#pageOverlay { position:fixed; top:0; left:0; z-index:1987; width:100%; height:100%; background:#000; filter:alpha(opacity=70); opacity:0.7; }<br />\r\n&lt;/style&gt;<br />\r\n&lt;/head&gt;<br />\r\n&lt;body&gt;<br />\r\n&lt;ol id=&quot;test&quot; onclick=&quot;document.getElementById(&#39;pageOverlay&#39;).style.visibility = &#39;visible&#39;&quot;&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;/ol&gt;<br />\r\n&lt;div id=&quot;pageOverlay&quot; onclick=&quot;this.style.visibility = &#39;hidden&#39;&quot;&gt;&lt;/div&gt;<br />\r\n&lt;/body&gt;<br />\r\n&lt;/html&gt;</p>\r\n\r\n<p>可是有一个头疼的问题，IE6不支持&ldquo;position:fixed&rdquo;，咱们只能通过js动态的修改它的TOP值以模拟静止定位，拖动滚动条的时候遮罩成肯定会抖动，因为每改变一次IE会重新渲染一次。但是微软却给我们提供了一个非常有趣的特性，如果给html或者body标签设置一个静止定位的背景图片，层在拖动滚动条的时候就不会抖动了，几乎完美的模拟了&ldquo;position:fixed&rdquo;。我在实际项目中发现这个特性他还能触发其他的特异功能，以后再说明。</p>\r\n\r\n<p>为了省事，咱们针对IE6用万恶expression在CSS中写点脚本，拖动滚动条的时候重新定位我们的遮罩层。传说中expression是非常耗性能的，可是咱们的expression几乎没有损耗，有兴趣的同学可以深入研究下expression。</p>\r\n\r\n<p>以下为引用的内容：</p>\r\n\r\n<p>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;<br />\r\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;<br />\r\n&lt;head&gt;<br />\r\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;<br />\r\n&lt;title&gt;lock page&lt;/title&gt;<br />\r\n&lt;meta name=&quot;author&quot; content=&quot;www.planeart.cn&quot; /&gt;<br />\r\n&lt;style&gt;<br />\r\n#pageOverlay { position:fixed; top:0; left:0; z-index:1987; width:100%; height:100%; background:#000; filter:alpha(opacity=70); opacity:0.7; }<br />\r\n/*IE6 fixed*/<br />\r\n* html { background:url(*) fixed; }<br />\r\n* html body { margin:0; height:100%; }<br />\r\n* html #pageOverlay { position: absolute; left: expression(documentElement.scrollLeft + documentElement.clientWidth - this.offsetWidth); top: expression(documentElement.scrollTop + documentElement.clientHeight - this.offsetHeight); }<br />\r\n&lt;/style&gt;<br />\r\n&lt;/head&gt;<br />\r\n&lt;body&gt;<br />\r\n&lt;ol id=&quot;test&quot; onclick=&quot;document.getElementById(&#39;pageOverlay&#39;).style.visibility = &#39;visible&#39;&quot;&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;/ol&gt;<br />\r\n&lt;div id=&quot;pageOverlay&quot; onclick=&quot;this.style.visibility = &#39;hidden&#39;&quot;&gt;&lt;/div&gt;<br />\r\n&lt;/body&gt;<br />\r\n&lt;/html&gt;</p>\r\n\r\n<p>好了，兼容IE6这个大头娃娃后，咱们的锁屏遮罩已经通杀主流浏览器了，但是呢用js写效果的同学们总是非常的蛋疼，总想折腾点什么来，咱们就再添加一点脚本，让锁屏的时候后可以中断用户操作，把滚动条、滚轮、tab键、全选、刷新、右键统统禁止掉，模拟真正的&lsquo;锁屏&rsquo;：</p>\r\n\r\n<p>以下为引用的内容：</p>\r\n\r\n<p>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;<br />\r\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;<br />\r\n&lt;head&gt;<br />\r\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;<br />\r\n&lt;title&gt;lock page&lt;/title&gt;<br />\r\n&lt;meta name=&quot;author&quot; content=&quot;www.planeart.cn&quot; /&gt;<br />\r\n&lt;style&gt;<br />\r\n#pageOverlay { visibility:hidden; position:fixed; top:0; left:0; z-index:1987; width:100%; height:100%; background:#000; filter:alpha(opacity=70); opacity:0.7; }<br />\r\n/*IE6 fixed*/<br />\r\n* html { background:url(*) fixed; }<br />\r\n* html body { margin:0; height:100%; }<br />\r\n* html #pageOverlay { position: absolute; left: expression(documentElement.scrollLeft + documentElement.clientWidth - this.offsetWidth); top: expression(documentElement.scrollTop + documentElement.clientHeight - this.offsetHeight); }<br />\r\n&lt;/style&gt;<br />\r\n&lt;script&gt;<br />\r\n(function(){<br />\r\n&nbsp;&nbsp; &nbsp;// 获取对象<br />\r\n&nbsp;&nbsp; &nbsp;var $ = function (id){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return document.getElementById(id);<br />\r\n&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;// 遍历<br />\r\n&nbsp;&nbsp; &nbsp;var each = function(a, b) {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for (var i = 0, len = a.length; i &lt; len; i++) b(a[i], i);<br />\r\n&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;// 事件绑定<br />\r\n&nbsp;&nbsp; &nbsp;var bind = function (obj, type, fn) {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (obj.attachEvent) {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;obj[&#39;e&#39; + type + fn] = fn;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;obj[type + fn] = function(){obj[&#39;e&#39; + type + fn](window.event);}<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;obj.attachEvent(&#39;on&#39; + type, obj[type + fn]);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} else {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;obj.addEventListener(type, fn, false);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;// 移除事件<br />\r\n&nbsp;&nbsp; &nbsp;var unbind = function (obj, type, fn) {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (obj.detachEvent) {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;obj.detachEvent(&#39;on&#39; + type, obj[type + fn]);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;obj[type + fn] = null;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch(_) {};<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} else {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;obj.removeEventListener(type, fn, false);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;// 阻止浏览器默认行为<br />\r\n&nbsp;&nbsp; &nbsp;var stopDefault = function(e){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;e.preventDefault ? e.preventDefault() : e.returnValue = false;<br />\r\n&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;// 获取页面滚动条位置<br />\r\n&nbsp;&nbsp; &nbsp;var getPage = function(){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var dd = document.documentElement,<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;db = document.body;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;left: Math.max(dd.scrollLeft, db.scrollLeft),<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;top: Math.max(dd.scrollTop, db.scrollTop)<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;// 锁屏<br />\r\n&nbsp;&nbsp; &nbsp;var lock = {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;show: function(){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$(&#39;pageOverlay&#39;).style.visibility = &#39;visible&#39;;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var p = getPage(),<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;left = p.left,<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;top = p.top;</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// 页面鼠标操作限制<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;this.mouse = function(evt){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var e = evt || window.event;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stopDefault(e);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;scroll(left, top);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;each([&#39;DOMMouseScroll&#39;, &#39;mousewheel&#39;, &#39;scroll&#39;, &#39;contextmenu&#39;], function(o, i) {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;bind(document, o, lock.mouse);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;});<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// 屏蔽特定按键: F5, Ctrl + R, Ctrl + A, Tab, Up, Down<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;this.key = function(evt){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var e = evt || window.event,<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;key = e.keyCode;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if((key == 116) || (e.ctrlKey &amp;&amp; key == 82) || (e.ctrlKey &amp;&amp; key == 65) || (key == 9) || (key == 38) || (key == 40)) {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;e.keyCode = 0;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}catch(_){};<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;stopDefault(e);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;bind(document, &#39;keydown&#39;, lock.key);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;},<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;close: function(){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$(&#39;pageOverlay&#39;).style.visibility = &#39;hidden&#39;;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;each([&#39;DOMMouseScroll&#39;, &#39;mousewheel&#39;, &#39;scroll&#39;, &#39;contextmenu&#39;], function(o, i) {<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;unbind(document, o, lock.mouse);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;});<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;unbind(document, &#39;keydown&#39;, lock.key);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;bind(window, &#39;load&#39;, function(){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$(&#39;btn_lock&#39;).onclick = function(){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;lock.show();<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$(&#39;pageOverlay&#39;).onclick = function(){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;lock.close();<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;};<br />\r\n&nbsp;&nbsp; &nbsp;});<br />\r\n})();<br />\r\n&lt;/script&gt;<br />\r\n&lt;/head&gt;<br />\r\n&lt;body&gt;<br />\r\n&lt;button id=&quot;btn_lock&quot; style=&quot;position: absolute; left:50%; top:40%; &quot;&gt;开启锁屏&lt;/button&gt;<br />\r\n&lt;ol id=&quot;test&quot;&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;li&gt;蓝色幻想&lt;/li&gt;<br />\r\n&lt;/ol&gt;<br />\r\n&lt;div id=&quot;pageOverlay&quot;&gt;&lt;/div&gt;<br />\r\n&lt;/body&gt;<br />\r\n&lt;/html&gt;</p>\r\n',0,1429432667,0,0),(14,12,'浅解用PHP实现MVC','<p>传统的面相过程式的开发方式在处理中型以上的应用时，就开始显得力不从心。即便我们能够快速的完成需求，但是在需求发生变更后或者进行后期维护的时候，我们会深深地陷入我们早期搭建的陷阱中。所以，使用面向对象的方式来实现MVC模式，将为我们梳理程序的架构提供一个清晰的思路。</p>\r\n\r\n<p>什么是MVC？</p>\r\n\r\n<p>关于MVC的定义和解释，可以说多种多样。我们可以在Wiki或者[2]中找到更为详尽的解释，这里我并不打算，也没有能力进行深入的讲解，从PHP开发的角度来讲，MVC可以概括为：</p>\r\n\r\n<p>视图(The View)：</p>\r\n\r\n<p>一说到视图，我们很多人都会想到模板引擎(诸如Smarty等等)。其实就是各种各样的输出，比如说html模板和Javascript文件等。</p>\r\n\r\n<p>模块(The Model)：</p>\r\n\r\n<p>模块代表了程序的逻辑，在企业应用中通常称为业务逻辑层。一般来讲，这一层完成的工作是把原始的数据处理成按照我们设计的数据结构存储的有意义的数据序列，并将这些数据交给视图去处理。通常情况下， 模块中会利用一个数据抽象类来进行与数据操作有关的处理。<br />\r\nModel通常包含了哪些用来同数据库打交道的函数。</p>\r\n\r\n<p>控制器(The Controller)：</p>\r\n\r\n<p>控制器使所有WEB应用的第一站，他接受收到的参数，比如$_GET变量，然后做出相应的反应。</p>\r\n\r\n<p>关于MVC的是否适合PHP的争论也很多，人们不断的讨论MVC是否适合PHP[3]，现在也已经有了很多的MVC框架，诸如PHP MVC Frameworks中列出的[4]。那么，为什么人们这么热衷于MVC，我们为什么要使用MVC在我们的设计中呢。</p>\r\n\r\n<p>为什么用MVC？</p>\r\n\r\n<p>MVC最早是用来解决桌面GUI的编程问题，最早的MVC框架应该是Sun在1999年提出的Model 2，后来演变成了Struts。MVC带给人们深刻的印象，但是我们在使用的过程中，却并没有认真的想过为什么使用MVC。<br />\r\n在传统的桌面应用中，一旦Model中有时间发生，我们可以主动的让View界面进行刷新，从而展示后台发生的变化。而在Web应用中，我们似乎限于传统的Http的Request/Response的方式，我们似乎没有办法让用户端进行更新。这一段讨论，并不是认为MVC不能够用来进行WEB应用的开发，而是觉得从某种程度上来说，他还不是最合适的。<br />\r\n关于使用MVC的争论还有很多[1]，但是相信所有习惯了使用MVC来组织自己的项目的人，让他选择一个新的项目构架时，一定不会放弃MVC。</p>\r\n\r\n<p>如何实现MVC？</p>\r\n\r\n<p>下面是一个超级简单的MVC结构实现，甚至连数据源都用了一个内置的固定数组，虽然简单，但其实众多的PHP Framework核心实现的思想应该和这个是差不多的，只不过一些framework提供了更多的方便开发者使用的工具，我也想自己来实现一个PHP的框架，目前正在着手策划中，也希望自己能够从框架的开发中学习到更多的PHP设计思想和方法。</p>\r\n\r\n<p>Controller.php</p>\r\n\r\n<p>include &#39;Model.php&#39;;<br />\r\ninclude &#39;View.php&#39;;<br />\r\nclass Controller {<br />\r\n&nbsp;&nbsp; &nbsp;private $model = &#39;&#39;;<br />\r\n&nbsp;&nbsp; &nbsp;private $view&nbsp; = &#39;&#39;;</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;public function Controller(){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;model = new Model();<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;view&nbsp; = new View();<br />\r\n&nbsp;&nbsp; &nbsp;}</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;public function doAction( $method = &#39;defaultMethod&#39;, $params = array() ){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if( empty($method) ){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;defaultMethod();<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}else if( method_exists($this, $method) ){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;call_user_func(array($this, $method), $params);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}else{<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;nonexisting_method();<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;}</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;public function link_page($name = &#39;&#39;){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$links = $this-&gt;model-&gt;getLinks();<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;view-&gt;display($links);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$result = $this-&gt;model-&gt;getResult($name);<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;view-&gt;display($result);<br />\r\n&nbsp;&nbsp; &nbsp;}</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;public function defaultMethod(){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;br();<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo &quot;This is the default method. &quot;;<br />\r\n&nbsp;&nbsp; &nbsp;}</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;public function nonexisting_method(){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;br();<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo &quot;This is the noexisting method. &quot;;<br />\r\n&nbsp;&nbsp; &nbsp;}</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;public function br(){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo &quot;&lt;br /&gt;&quot;;<br />\r\n&nbsp;&nbsp; &nbsp;}<br />\r\n}<br />\r\n$controller = new Controller();<br />\r\n$controller-&gt;doAction(&#39;link_page&#39;, &#39;b&#39;);<br />\r\n$controller-&gt;doAction();</p>\r\n\r\n<p>Model.php</p>\r\n\r\n<p>class Model {<br />\r\n&nbsp;&nbsp; &nbsp;private $database = array(<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&quot;a&quot;&nbsp;&nbsp;&nbsp; =&gt;&nbsp;&nbsp;&nbsp; &quot;hello world&quot;,<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&quot;b&quot;&nbsp;&nbsp;&nbsp; =&gt;&nbsp;&nbsp;&nbsp; &quot;ok well done&quot;,<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&quot;c&quot;&nbsp;&nbsp;&nbsp; =&gt;&nbsp;&nbsp;&nbsp; &quot;good bye&quot;<br />\r\n&nbsp;&nbsp; &nbsp;);</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;//@TODO connect the database</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;//run the query and get the result<br />\r\n&nbsp;&nbsp; &nbsp;public function getResult($name){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if( empty($name) ){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return FALSE;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if( in_array($name, array_keys( $this-&gt;database ) ) ){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return $this-&gt;database[$name];<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br />\r\n&nbsp;&nbsp; &nbsp;}</p>\r\n\r\n<p>&nbsp;&nbsp; &nbsp;public function getLinks(){<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$links = &quot;&lt;a href=&#39;#&#39;&gt;Link A&lt;/a&gt;&amp;nbsp;&amp;nbsp;&quot;;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$links.= &quot;&lt;a href=&#39;#&#39;&gt;Link B&lt;/a&gt;&amp;nbsp;&amp;nbsp;&quot;;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$links.= &quot;&lt;a href=&#39;#&#39;&gt;Link C&lt;/a&gt;&amp;nbsp;&amp;nbsp;&quot;;<br />\r\n&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return $links;<br />\r\n&nbsp;&nbsp; &nbsp;}<br />\r\n}</p>\r\n\r\n<p>view.php</p>\r\n\r\n<p>class View {<br />\r\n&nbsp;&nbsp; &nbsp;public function display($output){<br />\r\n&nbsp;&nbsp; &nbsp;//ob_start();<br />\r\n&nbsp;&nbsp; &nbsp;echo $output;<br />\r\n&nbsp;&nbsp; &nbsp;}<br />\r\n}</p>\r\n',0,1429433278,0,0),(15,1,'ie6中png图片不透明解决方法','<p>今天介绍DD_belatedPNG,只需要一个理由,就是它支持backgrond-position与background-repeat.这是其他js插件不具备的。</p>\r\n\r\n<p>我们知道IE6是不支持透明的PNG的,这无疑限制了网页设计的发挥空间.<br />\r\n然而整个互联网上解决这个IE6的透明PNG的方案也是多不胜数,从使用IE特有的滤镜或是e&shy;xpression,再到javascript+透明GIF替代.但是这些方法都有一个缺点,就是不支持CSS中backgrond-position与background-repeat</p>\r\n\r\n<p>而我今天介绍DD_belatedPNG,只需要一个理由,就是它支持backgrond-position与background-repeat.这是其他js插件不具备的.同时DD_belatedPNG还支持a:hover属性,以及&lt;img&gt;</p>\r\n\r\n<p>原理<br />\r\n这个js插件使用了微软的VML语言进行绘制,而其他多数解决PNG问题的js插件用的是AlphaImageLoader滤镜</p>\r\n\r\n<p>使用方法<br />\r\n1.下载DD_belatedPNG.js文件.<br />\r\n2.在网页中引用,如下:<br />\r\n&lt;!--[if lte IE 6]&gt;<br />\r\n&lt;script src=&quot;Js/DD_belatedPNG_0.0.8a.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;<br />\r\n&lt;script type=&quot;text/javascript&quot;&gt;<br />\r\nDD_belatedPNG.fix(&#39;div, ul, img, li, input , a, .png_bg&#39;);<br />\r\n/* 将 .png_bg 改成你应用了透明PNG的CSS选择器*/<br />\r\n&lt;/script&gt;<br />\r\n&lt;![endif]--&gt;<br />\r\n3.有2种调用函数,一种是DD_belatedPNG.fix(),如上代码.另一种是fix(),这中方法需要在函数内指出css选择器名</p>\r\n\r\n<p>使用a:hover请留意<br />\r\n5-25更新:如果你也像jutoy同学一样想要用透明PNG作为a:hover时的背景图片,那么你需要留意你的代码,需要以&rdquo;a:hover&rdquo;来作为选择器.否则可能会导致无法成功.同时我也更新了demo,请需要的更新查看.接着我们看看正确的代码:<br />\r\n&lt;!--[if IE 6]&gt;<br />\r\n&lt;script type=&quot;text/javascript&quot; src=&quot;js/DD_belatedPNG.js&quot; &gt;&lt;/script&gt;<br />\r\n&lt;script type=&quot;text/javascript&quot;&gt;<br />\r\nDD_belatedPNG.fix(&#39;.trans,.box a:hover&#39;);<br />\r\n&lt;/script&gt;<br />\r\n&lt;![endif]--&gt;</p>\r\n',1,1429439341,0,0);
/*!40000 ALTER TABLE `blog` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `category`
--

DROP TABLE IF EXISTS `category`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `category` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL DEFAULT '' COMMENT '分类名称',
  `parent_id` int(11) NOT NULL DEFAULT '0' COMMENT '父分类id',
  `level` int(2) NOT NULL DEFAULT '1' COMMENT '几级分类,顶级分类为1',
  `blogs` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '分类下包含的博客数量',
  `creation_time` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '创建时间',
  `modification_time` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '修改时间',
  `is_deleted` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '是否被删除',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 COMMENT='博文分类';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `category`
--

LOCK TABLES `category` WRITE;
/*!40000 ALTER TABLE `category` DISABLE KEYS */;
INSERT INTO `category` VALUES (1,'js',0,1,1,0,0,0),(2,'jquery',1,2,2,0,0,0),(3,'css',0,1,1,0,0,0),(4,'css3',3,2,1,0,0,0),(5,'网站性能',0,1,0,0,0,0),(6,'静态化',5,2,1,0,0,0),(7,'版本控制',0,1,0,0,0,0),(8,'svn',7,2,3,0,0,0),(9,'缓存',5,2,1,0,0,0),(10,'php技术',0,1,2,0,0,0),(11,'程序架构',0,1,0,0,0,0),(12,'mvc',11,2,2,0,0,0),(13,'html',0,1,1,0,0,0);
/*!40000 ALTER TABLE `category` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping routines for database 'blog'
--
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2015-04-19 18:30:33
